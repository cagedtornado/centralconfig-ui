dependencies:
  post:
    - npm run build

deployment:
  release:
    branch: master
    commands:
    - mkdir -p /tmp/ui/js
    - mkdir -p /tmp/ui/css
    - cp css/*.css /tmp/ui/css
    - cp js/bundle.js /tmp/ui/js
    - cp index.html /tmp/ui/index.html
    - cd /tmp; zip -r9 $CIRCLE_ARTIFACTS/centralconfig-ui.zip ui
    - go get github.com/tcnksm/ghr
    - ghr -t $GITHUB_TOKEN -u $CIRCLE_PROJECT_USERNAME -r $CIRCLE_PROJECT_REPONAME v1.0.$CIRCLE_BUILD_NUM $CIRCLE_ARTIFACTS/